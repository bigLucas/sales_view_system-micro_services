Resources:
  SharedApiGateway:
    Type: AWS::ApiGateway::RestApi
    Properties:
      Name: DDL-${self:provider.stage}
      Parameters:
        gatewayresponse.header.Access-Control-Allow-Origin: "'*'"
        gatewayresponse.header.Access-Control-Allow-Headers: "'*'"

Outputs:
  ApigatewayId:
    Value:
      Ref: SharedApiGateway
    Export:
      Name: portfolio-apigateway-id-${self:provider.stage}
  ApigatewayRootId:
    Value:
      "Fn::GetAtt": [ SharedApiGateway, RootResourceId ]
    Export:
      Name: portfolio-apigateway-rootid-${self:provider.stage}
